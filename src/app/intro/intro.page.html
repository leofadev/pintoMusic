<ion-content [style.background-color]="temaActual.contentBg" class="intro-page-content">
  <div class="background-gradient" [style.background]="temaActual.background"></div>
  <div class="background-shapes">
    <div class="shape shape-1"></div>
    <div class="shape shape-2"></div>
    <div class="shape shape-3"></div>
  </div>

  <!-- Musical notes background -->
  <div class="musical-notes">
    <div class="note note-1">ðŸŽµ</div>
    <div class="note note-2">ðŸŽ¶</div>
    <div class="note note-3">ðŸŽµ</div>
    <div class="note note-4">ðŸŽ¶</div>
    <div class="note note-5">ðŸŽµ</div>
  </div>

  <!-- Particle/Star background -->
  <div class="particles-background">
    <div class="particle particle-1"></div>
    <div class="particle particle-2"></div>
    <div class="particle particle-3"></div>
    <div class="particle particle-4"></div>
    <div class="particle particle-5"></div>
    <div class="particle particle-6"></div>
    <div class="particle particle-7"></div>
    <div class="particle particle-8"></div>
  </div>

  <!-- Abstract flowing elements -->
  <div class="abstract-elements">
    <div class="abstract-line line-1"></div>
    <div class="abstract-line line-2"></div>
    <div class="abstract-circle circle-1"></div>
  </div>

  <!-- Nuevo contenedor para los elementos destacados flotantes -->
  <div class="floating-featured-items">
    <!-- Iteramos sobre el array iconMusics para crear cada burbuja -->
    <div
      class="featured-item"
      *ngFor="let iconMusic of iconMusics; let i = index"
      [ngStyle]="getFloatingItemStyle(i)"
    >
      <img [src]="iconMusic.image" [alt]="iconMusic.text" class="featured-image" />
    </div>
  </div>

  <div class="main-wrapper">
    <div class="hero-section">
      <h1 class="hero-title ion-text-center" [style.color]="temaActual.titleColor">
        No es solo mÃºsica, es un sentimiento.
      </h1>
      <p class="hero-subtitle ion-text-center" [style.color]="temaActual.descriptionColor">
        Cada nota cuenta una historia.
      </p>
    </div>

    <div class="cards-container">
      <swiper-container
        #swiper
        effect="cards"
        grab-cursor="true"
        class="cards-swiper"
        [cardsEffect]="{
          slideShadows: true,
          transformEl: null,
          rotate: true,
          perSlideOffset: 8,
          perSlideRotate: 2
        }"
        autoplay-delay="5000"
        autoplay-disable-on-interaction="false"
        rewind="true"
        pagination="true"
        keyboard="true"
      >
        <swiper-slide
          *ngFor="let carta of cartas; let i = index"
          class="card-slide"
          [style.background]="temaActual.cardBackground"
          [style.border]="'1px solid ' + temaActual.cardBorder"
          [style.box-shadow]="temaActual.cardShadow"
        >
          <!-- Nueva capa para la imagen de fondo de la tarjeta -->
          <div
            *ngIf="carta.backgroundImage"
            class="card-background-image"
            [style.background-image]="'url(' + carta.backgroundImage + ')'"
          ></div>

          <!-- Gradient overlay ahora con un fondo fijo en CSS -->
          <div class="card-gradient-overlay"></div>

          <div class="card-content">
            <div class="">
              <h1
                class="card-title"
                [style.color]="carta.color"
                [style.font-weight]="'var(--music-font-weight-bold)'"
                [style.text-shadow]="'0 2px 8px rgba(0,0,0,0.3)'"
              >
                {{ carta.title }}
              </h1>
            </div>

            <div class="card-actions">
              <ion-button
                class="primary-button card-button"
                [style.--background]="'rgba(255,255,255,0.2)'"
                [style.--background-hover]="'rgba(255,255,255,0.3)'"
                [style.--color]="carta.color"
                [style.backdrop-filter]="'blur(10px)'"
                [style.border]="'1px solid rgba(255,255,255,0.3)'"
                size="small"
                (click)="onCardAction(i)"
              >
                <span class="button-text" [style.color]="carta.color">
                  {{ carta.buttonText }}
                </span>
              </ion-button>
            </div>
          </div>

          <!-- Decorative elements usando el tema actual -->
          <div class="card-decoration">
            <div class="decoration-circle" [style.background]="'rgba(255,255,255,0.1)'"></div>
            <div class="decoration-circle-small" [style.background]="'rgba(255,255,255,0.05)'"></div>
          </div>

          <!-- Card glow effect usando el color de cada carta -->
          <div
            class="card-glow"
            [style.background]="'radial-gradient(circle, ' + getCardMainColor(carta.background) + '40 0%, transparent 70%)'"
          ></div>
        </swiper-slide>
      </swiper-container>
    </div>
  </div>
</ion-content>
